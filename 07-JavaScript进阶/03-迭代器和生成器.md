## 什么是迭代器

### 概念

**迭代器**（Iterator）是 JavaScript 中一种特殊的对象，它提供了一种**统一的、通用的**方式**遍历**个各种不同类型的数据结构。可以遍历的数据结构包括：数组、字符串、Set、Map 等**可迭代对象**。我们也可以自定义实现迭代器，以支持遍历自定义的数据结构。

通过迭代器，我们可以按顺序逐个获取集合中的元素，不需要手动跟踪索引（索引也可称之为指针、游标）。因为迭代器的行为很像数据库中的游标（cursor）。

也不需要关心可迭代对象内部的实现细节。也就是说，我不需要关心目标对象是数组还是字符串，还是其他的数据结构。对于迭代器来说，这些数据结构都是一样的处理方式。

迭代器是一种常见的编程模式，最早出现在1974年设计的CLU编程语言中。不仅仅在JS中，其他许多编程语言（比如 Java、Python 等）都提供了迭代器的概念和实现。实现方式各有不同，但目的都是帮助我们用通用的方式遍历对象的数据，提高代码的简洁性、可读性和和维护性。

### 迭代协议

迭代协议并不是编程语言的内置实现或语法，而是协议。迭代协议具体分为两个协议：可迭代协议和迭代器协议。

**迭代器协议**规定了产生一系列值（无论是有限个还是无限个）的标准方式。

迭代器是一个具体的对象，这个对象要符合迭代器协议。**在JS中，某个对象只有实现了符合特定要求的 next() 方法，这个对象才能成为迭代器**。



### 实现原理：next() 方法

在JS中，迭代器的实现原理是通过定义一个特定的` next()` 方法，该方法在每次迭代中返回一个包含两个属性的对象：value 和 done。

- done 属性：
- value 属性：

具体来说，next() 方法有如下的要求：

（1）参数：无参数或者有一个参数。

（2）返回值：返回一个应当有以下两个属性的对象：

- done 属性（boolean 类型）：表示迭代是否已经完成。当迭代器遍历完所有元素时，done 为 true，否则为 false。具体解释如下：

  - 如果迭代器可以产生序列中的下一个值，则为 false，这等价于没有指定 done 属性。

  - 如果迭代器已将序列迭代完毕，则为 true。这种情况下，value 可以省略，如果 value 依然存在，即为迭代结束之后的默认返回值。

- value 属性：包含当前迭代步骤的值。每次调用 next() 方法时，迭代器返回下一个值。done 为true时，可以省略。

我们要注意区分一些概念：迭代器、可迭代对象、容器。迭代器是提供迭代功能的对象。可迭代对象是被迭代的数据结构，也称之为容器。



























